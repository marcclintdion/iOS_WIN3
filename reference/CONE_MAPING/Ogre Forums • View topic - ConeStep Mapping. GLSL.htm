<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" xml:lang="en-gb" lang="en-gb"><head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="content-language" content="en-gb">
<meta http-equiv="imagetoolbar" content="no">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group">
<meta name="keywords" content="">
<meta name="description" content="">

<title>Ogre Forums • View topic - ConeStep Mapping. GLSL</title>



<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var collapse_view = 'Collapse view';
	var expand_view = 'Expand view';
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.ogre3d.org';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	

	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/styleswitcher.js"></script>
<script type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/highlight.js"></script>
<script type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/forum_fn.js"></script>

<link href="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/print.css" rel="stylesheet" type="text/css" media="print" title="printonly">
<link href="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/style.css" rel="stylesheet" type="text/css" media="screen, projection">

<link href="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/normal.css" rel="stylesheet" type="text/css" title="A">
<link href="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/medium.css" rel="alternate stylesheet" type="text/css" title="A+">
<link href="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/large.css" rel="alternate stylesheet" type="text/css" title="A++">



</head>

<body id="phpbb" class="section-viewtopic ltr">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="http://www.ogre3d.org/forums/index.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" title="Board index" id="logo"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/site_logo.gif" alt="" title="" height="68" width="210"></a>
				<h1>Ogre Forums</h1>
				<p>Support and community hang-out spot for Ogre3D</p>
				<p style="display: none;"><a href="#start_here">Skip to content</a></p>
			</div>

		
		<div id="search-box">
			<div class="shortcutbuttons">
				<a href="http://www.ogre3d.org/forums/viewtopic.php?t=11886"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/rules_button.gif" border="0"></a>
				<a href="http://www.ogre3d.org/"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/mainsite_button.gif" border="0"></a>
				<a href="http://www.ogre3d.org/addonforums/"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/addons_button.gif" border="0"></a>
				<a href="http://www.ogre3d.org/wiki/"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/wiki_button.gif" border="0"></a>
			</div>
				<form action="./search.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" method="post" id="search">
				<fieldset>
					<input name="keywords" id="keywords" maxlength="128" title="Search for keywords" class="inputbox search" value="Search…" onclick="if(this.value=='Search…')this.value='';" onblur="if(this.value=='')this.value='Search…';" type="text"> 
					<input class="button2" value="Search" type="submit"><br>
					<a href="http://www.ogre3d.org/forums/search.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" title="View the advanced search options">Advanced search</a> <input name="sid" value="eefdf671cffffb181a8f2cca1d0ffe43" type="hidden">

				</fieldset>
				</form>
			</div>
		

			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="http://www.ogre3d.org/forums/index.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" accesskey="h">Board index</a>  <strong>‹</strong> <a href="http://www.ogre3d.org/forums/viewforum.php?f=18&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">User Forums</a> <strong>‹</strong> <a href="http://www.ogre3d.org/forums/viewforum.php?f=2&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">Help</a></li>

				<li class="rightside"><a href="#" onclick="fontsizeup(); return false;" onkeypress="return fontsizeup(event);" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://www.ogre3d.org/forums/viewtopic.php?f=2&amp;t=75567&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>
			</ul>

			

			<ul class="linklist rightside">
				<li class="icon-faq"><a href="http://www.ogre3d.org/forums/faq.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" title="Frequently Asked Questions">FAQ</a></li>
				<li class="icon-register"><a href="http://www.ogre3d.org/forums/ucp.php?mode=register&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">Register</a></li>
					<li class="icon-logout"><a href="http://www.ogre3d.org/forums/ucp.php?mode=login&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" title="Login" accesskey="x">Login</a></li>
				
			</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>

	</div>

	<div align="right">
	<!-- SiteSearch Google -->
	<form align="right" action="http://www.google.com/cse" id="cse-search-box">
  <div>
    <input name="cx" value="partner-pub-3579678752126977:3867056060" type="hidden">
    <input name="ie" value="UTF-8" type="hidden">
    <input style="border: 1px solid rgb(126, 157, 185); padding: 2px; background: url(&quot;http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif&quot;) no-repeat scroll left center rgb(255, 255, 255);" name="q" size="55" type="text">
    <input name="sa" value="Search" type="submit">
  </div>
<input value="www.ogre3d.org/forums/viewtopic.php?f=2&amp;t=75567" name="siteurl" type="hidden"><input value="www.google.ca/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0CC4QFjAA&amp;url=http%3A%2F%2Fwww.ogre3d.org%2Fforums%2Fviewtopic.php%3Ff%3D2%26t%3D75567&amp;ei=m88UUf-HI-_nigLp24HIAg&amp;usg=AFQjCNGdDcJdFtSFEvZyCi5frFxrC0krHw&amp;bvm=bv.42080656,d.cGE&amp;cad=rja" name="ref" type="hidden"><input name="ss" type="hidden"></form>

<script type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/brand"></script>
	
	<!-- SiteSearch Google -->
	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
		 
<h2><a href="http://www.ogre3d.org/forums/viewtopic.php?f=2&amp;t=75567&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">ConeStep Mapping. GLSL</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><div style="display: none !important;">Problems building or running the engine, queries about how to use features etc.<br></div>

<script type="text/javascript"><!--
google_ad_client = "pub-3579678752126977";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="3348924473";
google_color_border = "669966";
google_color_bg = "99CC99";
google_color_link = "000000";
google_color_url = "00008B";
google_color_text = "336633";
//--></script>
<div class="adsense_wide" id="adsense_topic_top">
<script kabl="89517" style="display: none !important" type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/show_ads.js">
  </script>
</div>

<script>hljs.initHighlightingOnLoad();</script>

<div class="topic-actions">

	<div class="buttons">
	
		<div class="reply-icon"><a href="http://www.ogre3d.org/forums/posting.php?mode=reply&amp;f=2&amp;t=75567&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="search-box">
			<form method="post" id="topic-search" action="./search.php?sid=eefdf671cffffb181a8f2cca1d0ffe43">
			<fieldset>
				<input class="inputbox search tiny" name="keywords" id="search_keywords" size="20" value="Search this topic…" onclick="if(this.value=='Search this topic…')this.value='';" onblur="if(this.value=='')this.value='Search this topic…';" type="text">
				<input class="button2" value="Search" type="submit">
				<input value="75567" name="t" type="hidden">
				<input value="msgonly" name="sf" type="hidden">
			</fieldset>
			</form>
		</div>
	
		<div class="pagination">
			5 posts
			 • Page <strong>1</strong> of <strong>1</strong>
		</div>
	

</div>
<div class="clear"></div>


	<div id="p478008" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3 class="first"><a href="#p478008">ConeStep Mapping. GLSL</a></h3>
			<p class="author"><a href="http://www.ogre3d.org/forums/viewtopic.php?p=478008&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43#p478008"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_post_target.gif" alt="Post" title="Post" height="9" width="11"></a>by <strong><a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a></strong> » Mon Nov 26, 2012 11:28 pm </p>

			

			<div class="content">Trying to run it on OpenGL Renderer...<br>Nothing at all...  <img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_sad.gif" alt=":(" title="Sad"> <br>Can anybody make the ".material" script for it.<br><span style="font-weight: bold">Original topic(</span>CG implementation): <!-- l --><a class="postlink-local" href="http://www.ogre3d.org/forums/viewtopic.php?f=11&amp;t=42706&amp;start=25">viewtopic.php?f=11&amp;t=42706&amp;start=25</a><!-- l --><br><span style="font-weight: bold">Original GLSL shader:</span> <!-- m --><a class="postlink" href="http://www.gamedev.net/topic/372739-cone-step-mapping-paper--demo-bummer-8/">http://www.gamedev.net/topic/372739-con ... -bummer-8/</a><!-- m --><br><br>Help me, please.</div>

			
		</div>

		
			<dl class="postprofile" id="profile478008">
			<dt>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a>
			</dt>

			<dd>Gnoblar</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd>
			<dd><strong>Kudos:</strong> 0 </dd>
		<dd><strong>Joined:</strong> 28 Jun 2011</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider">

	<div id="p478062" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p478062">Re: ConeStep Mapping. GLSL</a></h3>
			<p class="author"><a href="http://www.ogre3d.org/forums/viewtopic.php?p=478062&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43#p478062"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_post_target.gif" alt="Post" title="Post" height="9" width="11"></a>by <strong><a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=17614&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" style="color: #AA0000;" class="username-coloured">TheSHEEEP</a></strong> » Tue Nov 27, 2012 4:49 pm </p>

			

			<div class="content">What exactly are you trying to run? What doesn't work?<br><br>What do your materials look like, what do your shaders look like, how did you set it up?<br><br>It's a bit hard for us to help you like this. <img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_smile.gif" alt=":)" title="Smile"></div>

			<div id="sig478062" class="signature">MinGW maintainer here. Not an expert on the engine internals. Yet... *evil laughter and thunder*</div>
		</div>

		
			<dl class="postprofile" id="profile478062">
			<dt>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=17614&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" style="color: #AA0000;" class="username-coloured">TheSHEEEP</a>
			</dt>

			<dd>OGRE Team Member<br><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/forums_2_star_gold.gif" alt="OGRE Team Member" title="OGRE Team Member"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 529</dd>
			<dd><strong>Kudos:</strong> <a href="http://www.ogre3d.org/forums/thankslist.php?mode=givens&amp;author_id=17614&amp;give=false&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">14</a> </dd>
		<dd><strong>Joined:</strong> 02 Jun 2008</dd><dd><strong>Location:</strong> Berlin</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider">

	<div id="p478087" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p478087">Re: ConeStep Mapping. GLSL</a></h3>
			<p class="author"><a href="http://www.ogre3d.org/forums/viewtopic.php?p=478087&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43#p478087"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_post_target.gif" alt="Post" title="Post" height="9" width="11"></a>by <strong><a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=1187&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" style="color: #AA0000;" class="username-coloured">Kojack</a></strong> » Wed Nov 28, 2012 1:13 am </p>

			

			<div class="content">It's possible that in 3 weeks cone step mapping 
will no longer be illegal (at least in america, it violates a patent 
that is due to expire in mid december).</div>

			
		</div>

		
			<dl class="postprofile" id="profile478087">
			<dt>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=1187&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/file.gif" alt="User avatar" height="84" width="77"></a><br>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=1187&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" style="color: #AA0000;" class="username-coloured">Kojack</a>
			</dt>

			<dd>OGRE Moderator<br><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/forums_2_star_silver.gif" alt="OGRE Moderator" title="OGRE Moderator"></dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 5186</dd>
			<dd><strong>Kudos:</strong> <a href="http://www.ogre3d.org/forums/thankslist.php?mode=givens&amp;author_id=1187&amp;give=false&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">231</a> </dd>
		<dd><strong>Joined:</strong> 25 Jan 2004</dd><dd><strong>Location:</strong> Brisbane, Australia</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider">

	<div id="p478144" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p478144">Re: ConeStep Mapping. GLSL</a></h3>
			<p class="author"><a href="http://www.ogre3d.org/forums/viewtopic.php?p=478144&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43#p478144"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_post_target.gif" alt="Post" title="Post" height="9" width="11"></a>by <strong><a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a></strong> » Wed Nov 28, 2012 9:13 pm </p>

			

			<div class="content"><span style="font-weight: bold">shared.vert</span><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><pre><code data-result="[object Object]" class="cpp">uniform <span class="keyword">float</span> texsize;

attribute vec3 tangent;
attribute vec4 vertex;

varying vec2 texCoord;
varying vec3 vertex_pos;

<span class="keyword">void</span> main(<span class="keyword">void</span>)
{
&nbsp; &nbsp;vec3 eyeSpaceVert = (gl_ModelViewMatrix * gl_Vertex).xyz;
&nbsp; &nbsp;vec3 eyeSpaceTangent&nbsp; = gl_NormalMatrix * tangent;
&nbsp; &nbsp;vec3 eyeSpaceNormal&nbsp; &nbsp;= gl_NormalMatrix * gl_Normal;
&nbsp; &nbsp;vec3 eyeSpaceBinormal = gl_NormalMatrix * cross(gl_Normal,tangent);
&nbsp; &nbsp;vertex_pos = vec3 (
&nbsp; &nbsp;&nbsp; &nbsp;dot (eyeSpaceTangent, eyeSpaceVert),
&nbsp; &nbsp;&nbsp; &nbsp;dot (eyeSpaceBinormal, eyeSpaceVert),
&nbsp; &nbsp;&nbsp; &nbsp;dot (eyeSpaceNormal, eyeSpaceVert));
&nbsp; &nbsp;texCoord = gl_MultiTexCoord0.xy;
&nbsp; &nbsp;gl_Position = ftransform();
}
</code></pre></dd></dl><br><br><span style="font-weight: bold">csm_03step.frag</span><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><pre><code data-result="[object Object]" class="cpp">uniform sampler2D stepmap;
uniform sampler2D texmap;
uniform <span class="keyword">float</span> depth;
uniform <span class="keyword">float</span> texsize;

varying vec2 texCoord;
varying vec3 vertex_pos;
<span class="keyword">void</span> intersect_square_cone_3step (inout vec3 dp, in vec3 ds);

<span class="keyword">void</span> main(<span class="keyword">void</span>)
{
&nbsp; &nbsp;vec4 t,c;
&nbsp; &nbsp;vec3 s;
&nbsp; &nbsp;vec3 pt_eye;
&nbsp; &nbsp;<span class="keyword">float</span> a;
&nbsp; &nbsp;a&nbsp; = -depth / vertex_pos.z;
&nbsp; &nbsp;s = vertex_pos * a;
&nbsp; &nbsp;s.z = <span class="number">1.0</span>;

&nbsp; &nbsp;pt_eye = vec3 (texCoord, <span class="number">0.0</span>);
&nbsp; &nbsp;intersect_square_cone_3step (pt_eye, s);
&nbsp; &nbsp;c=texture2D(texmap,pt_eye.xy);
&nbsp; &nbsp;t=texture2D(stepmap, pt_eye.xy);
&nbsp; &nbsp;t = vec4 ((t.ba-<span class="number">0.5</span>) * (-depth * texsize), <span class="number">1.0</span>, <span class="number">0.0</span>);
&nbsp; &nbsp;t=normalize(t);
&nbsp; &nbsp;gl_FragColor = vec4(c.xyz, <span class="number">1.0</span>);
}

<span class="keyword">void</span> intersect_square_cone_3step (inout vec3 dp, in vec3 ds)
{
&nbsp; &nbsp;<span class="keyword">float</span> iz = max(abs(ds.x),abs(ds.y));
&nbsp; &nbsp;<span class="keyword">const</span> <span class="keyword">float</span> w = <span class="number">1.2</span>;
&nbsp; &nbsp;vec4 t;
&nbsp; &nbsp;dp += <span class="number">0.3</span> * ds;
&nbsp; &nbsp;t=texture2D(stepmap,dp.xy);
&nbsp; &nbsp;dp += ds * w * (t.r - dp.z) / (iz/(t.g*t.g) + <span class="number">1.0</span>);
&nbsp; &nbsp;t=texture2D(stepmap,dp.xy);
&nbsp; &nbsp;dp += ds * w * (t.r - dp.z) / (iz/(t.g*t.g) + <span class="number">1.0</span>);
&nbsp; &nbsp;t=texture2D(stepmap,dp.xy);
&nbsp; &nbsp;dp += ds * w * (t.r - dp.z) / (iz/(t.g*t.g) + <span class="number">1.0</span>);
&nbsp; &nbsp;<span class="keyword">return</span>;
}
</code></pre></dd></dl><br><br><span style="font-weight: bold">glcsm.material</span><br><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><pre><code data-result="[object Object]" class="cpp">vertex_program npcsm_vp glsl {
&nbsp; &nbsp;source shared.vert
&nbsp; &nbsp;default_params {
&nbsp; &nbsp;&nbsp; &nbsp;param_named_auto texsize texture_size <span class="number">0</span>
&nbsp; &nbsp;}
}
fragment_program npcsm_fp glsl {
&nbsp; &nbsp;source csm_03step.frag
&nbsp; &nbsp;default_params {
&nbsp; &nbsp;&nbsp; &nbsp;param_named texmap <span class="keyword">int</span> <span class="number">0</span>
&nbsp; &nbsp;&nbsp; &nbsp;param_named stepmap <span class="keyword">int</span> <span class="number">1</span>
&nbsp; &nbsp;&nbsp; &nbsp;param_named_auto texsize texture_size <span class="number">0</span>
&nbsp; &nbsp;&nbsp; &nbsp;param_named depth <span class="keyword">float</span> <span class="number">0.2</span>
&nbsp; &nbsp;}
}
material npcsm {
&nbsp; &nbsp;technique {
&nbsp; &nbsp;&nbsp; &nbsp;pass {
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;vertex_program_ref npcsm_vp {
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;fragment_program_ref npcsm_fp {
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;texture_unit diffuse_map {
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;texture collage_base.jpg
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;texture_unit csm_map {
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;texture collage_step.png
&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}
&nbsp; &nbsp;&nbsp; &nbsp;}
&nbsp; &nbsp;}
}
</code></pre></dd></dl><br><br><span style="font-weight: bold">diffuse_map</span>: <a href="https://dl.dropbox.com/u/81319788/collage_base.jpg" class="postlink">collage_base.jpg</a><br><span style="font-weight: bold">csm_map</span>: <a href="https://dl.dropbox.com/u/81319788/collage_step.png" class="postlink">collage_step.png</a><br><br><span style="font-weight: bold">Last screenshot</span>:<br><a href="https://dl.dropbox.com/u/81319788/screenshot11292012_000756813.jpg" class="postlink">https://dl.dropbox.com/u/81319788/screenshot11292012_000756813.jpg</a><br><br>mesh has a generated tangents... otherwise shader show only a plain color.</div>

			
		</div>

		
			<dl class="postprofile" id="profile478144">
			<dt>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a>
			</dt>

			<dd>Gnoblar</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd>
			<dd><strong>Kudos:</strong> 0 </dd>
		<dd><strong>Joined:</strong> 28 Jun 2011</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider">

	<div id="p478242" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			

			<h3><a href="#p478242">Re: ConeStep Mapping. GLSL</a></h3>
			<p class="author"><a href="http://www.ogre3d.org/forums/viewtopic.php?p=478242&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43#p478242"><img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_post_target.gif" alt="Post" title="Post" height="9" width="11"></a>by <strong><a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a></strong> » Fri Nov 30, 2012 8:52 pm </p>

			

			<div class="content">Anybody knows, where is the problem? It doesn't work...  <img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_sad.gif" alt=":(" title="Sad">  <img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_sad.gif" alt=":(" title="Sad">  <img src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/icon_sad.gif" alt=":(" title="Sad"></div>

			
		</div>

		
			<dl class="postprofile" id="profile478242">
			<dt>
				<a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36002&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">NeParij</a>
			</dt>

			<dd>Gnoblar</dd>

		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd>
			<dd><strong>Kudos:</strong> 0 </dd>
		<dd><strong>Joined:</strong> 28 Jun 2011</dd>

		</dl>
	

		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider">

	<form id="viewtopic" method="post" action="./viewtopic.php?f=2&amp;t=75567&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">

	<fieldset class="display-options" style="margin-top: 0; ">
		
		<label>Display posts from previous: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
		<label>Sort by <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select> <input name="sort" value="Go" class="button2" type="submit"></label>
		
	</fieldset>

	</form>
	<hr>


<div class="topic-actions">
	<div class="buttons">
	
		<div class="reply-icon"><a href="http://www.ogre3d.org/forums/posting.php?mode=reply&amp;f=2&amp;t=75567&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" title="Post a reply"><span></span>Post a reply</a></div>
	
	</div>

	
		<div class="pagination">
			5 posts
			 • Page <strong>1</strong> of <strong>1</strong>
		</div>
	
</div>
<script type="text/javascript"><!--
google_ad_client = "pub-3579678752126977";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="3348924473";
google_color_border = "669966";
google_color_bg = "99CC99";
google_color_link = "000000";
google_color_url = "00008B";
google_color_text = "336633";
//--></script>
<div class="adsense_wide" id="adsense_topic_bottom">
<script kabl="89517" style="display: none !important" type="text/javascript" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/show_ads.js">
  </script>
</div>


	<p></p><p><a href="http://www.ogre3d.org/forums/viewforum.php?f=2&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43" class="left-box left" accesskey="r">Return to Help</a></p>

	<form method="post" id="jumpbox" action="./viewforum.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" onsubmit="if(document.jumpbox.f.value == -1){return false;}">

	
		<fieldset class="jumpbox">
	
			<label for="f" accesskey="j">Jump to:</label>
			<select name="f" id="f" onchange="if(this.options[this.selectedIndex].value != -1){ document.forms['jumpbox'].submit() }">
			
				<option value="-1">Select a forum</option>
			<option value="-1">------------------</option>
				<option value="26">Global</option>
			
				<option value="27">&nbsp; &nbsp;Announcements / News / Information</option>
			
				<option value="18">User Forums</option>
			
				<option value="1">&nbsp; &nbsp;General Discussion</option>
			
				<option value="2" selected="selected">&nbsp; &nbsp;Help</option>
			
				<option value="3">&nbsp; &nbsp;Feature Requests</option>
			
				<option value="5">&nbsp; &nbsp;Using OGRE in practice</option>
			
				<option value="8">&nbsp; &nbsp;Artists &amp; Content Creators</option>
			
				<option value="10">&nbsp; &nbsp;Back to Basics</option>
			
				<option value="11">&nbsp; &nbsp;Showcase</option>
			
				<option value="15">&nbsp; &nbsp;Events &amp; Meetings</option>
			
				<option value="16">&nbsp; &nbsp;Lounge / Off-topic</option>
			
				<option value="24">&nbsp; &nbsp;Addons</option>
			
				<option value="19">Development Forums</option>
			
				<option value="13">&nbsp; &nbsp;Google Summer Of Code</option>
			
				<option value="4">&nbsp; &nbsp;Developer talk</option>
			
				<option value="25">&nbsp; &nbsp;Ogre 2.0+</option>
			
				<option value="22">&nbsp; &nbsp;Papercuts</option>
			
				<option value="21">&nbsp; &nbsp;Mobile Devices</option>
			
				<option value="20">Misc</option>
			
				<option value="9">&nbsp; &nbsp;Recruitment</option>
			
			</select>
			<input value="Go" class="button2" type="submit">
		</fieldset>
	</form>


	<h3>Who is online</h3>
	<p>Users browsing this forum: <span style="color: #9E8DA7;" class="username-coloured">Google [Bot]</span>, <a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=36982&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">Icedev</a>, <a href="http://www.ogre3d.org/forums/memberlist.php?mode=viewprofile&amp;u=18181&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">iubeor</a> and 11 guests</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="http://www.ogre3d.org/forums/index.php?sid=eefdf671cffffb181a8f2cca1d0ffe43" accesskey="h">Board index</a></li>
				
			<li class="rightside"><a href="http://www.ogre3d.org/forums/memberlist.php?mode=leaders&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">The team</a> • <a href="http://www.ogre3d.org/forums/ucp.php?mode=delete_cookies&amp;sid=eefdf671cffffb181a8f2cca1d0ffe43">Delete all board cookies</a> • All times are UTC [ <abbr title="Daylight Saving Time">DST</abbr> ]</li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> © 2000, 2002, 2005, 2007 phpBB Group. Color scheme by <a href="http://www.colorizeit.com/">ColorizeIt!</a>
		
	</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	
</div>

<!-- Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script kabl="89517" style="display: none !important" src="Ogre%20Forums%20%E2%80%A2%20View%20topic%20-%20ConeStep%20Mapping.%20GLSL_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4018191-4");
pageTracker._trackPageview();
} catch(err) {}</script>
<!-- Analytics -->
    
</body></html>